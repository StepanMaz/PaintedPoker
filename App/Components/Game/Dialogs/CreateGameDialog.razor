@using PaintedPoker.Game
@using PaintedPoker.Game.Builder
@using PaintedPoker.Game.Rules
@using PaintedPoker.Game.Rules.Deck
@using PaintedPoker.Game.Services;

<MudDialog>
    <DialogContent>
        <MudTextField Label="Game Name" DebounceInterval="300" OnDebounceIntervalElapsed="(v) => GameName = v"
            @bind-Value="GameName" style="margin-bottom: 10px;" MaxLength="MAX_GAME_NAME_LENGTH" />
        <MudNumericField Label="Player Count" @bind-Value="_gameBuilder.PlayerCount" Min="_gameBuilder.MinPlayerCount"
            Max="_gameBuilder.MaxPlayerCount" style="margin-bottom: 10px;" />
        <MudRadioGroup T="DeckInfo" bind-Value="_gameBuilder.DeckInfo">
            <MudRadio T="DeckInfo" Option="DeckInfo.Large">Big Card Deck</MudRadio>
            <MudRadio T="DeckInfo" Option="DeckSize.Small">Small Card Deck</MudRadio>
        </MudRadioGroup>
    </DialogContent>
    <DialogActions>
        <MudButton Disabled="Disabled" OnClick="Submit" Color="Color.Success" Variant="Variant.Filled">Create
        </MudButton>
    </DialogActions>
</MudDialog>

@code {
    private const int MAX_GAME_NAME_LENGTH = 40;

    private GameBuilder _gameBuilder = new GameBuilder();

    private string GameName = "";
    private bool Disabled => GameName.Length <= 1;

    [CascadingParameter]
    private MudDialogInstance MudDialog { get; set; } = null!;


    private void Submit()
    {
        MudDialog.Close(DialogResult.Ok((GameName, _gameBuilder)));
    }
}
